"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[3648],{763648:(e,t,a)=>{a.r(t),a.d(t,{default:()=>oe});var n=a(747313),o=a(809019),i=a(624631),c=a(263366),r=a(487462),l=a(194146),s=a(221921),d=a(217551),h=a(691615),u=a(197423),p=a(577342),m=a(617592),g=a(177430),x=a(132298);function j(e){return(0,x.Z)("MuiSwitch",e)}const v=(0,g.Z)("MuiSwitch",["root","edgeStart","edgeEnd","switchBase","colorPrimary","colorSecondary","sizeSmall","sizeMedium","checked","disabled","input","thumb","track"]);var b=a(346417);const f=["className","color","edge","size","sx"],y=(0,m.ZP)("span",{name:"MuiSwitch",slot:"Root",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.root,a.edge&&t["edge".concat((0,h.Z)(a.edge))],t["size".concat((0,h.Z)(a.size))]]}})((e=>{let{ownerState:t}=e;return(0,r.Z)({display:"inline-flex",width:58,height:38,overflow:"hidden",padding:12,boxSizing:"border-box",position:"relative",flexShrink:0,zIndex:0,verticalAlign:"middle","@media print":{colorAdjust:"exact"}},"start"===t.edge&&{marginLeft:-8},"end"===t.edge&&{marginRight:-8},"small"===t.size&&{width:40,height:24,padding:7,["& .".concat(v.thumb)]:{width:16,height:16},["& .".concat(v.switchBase)]:{padding:4,["&.".concat(v.checked)]:{transform:"translateX(16px)"}}})})),k=(0,m.ZP)(u.Z,{name:"MuiSwitch",slot:"SwitchBase",overridesResolver:(e,t)=>{const{ownerState:a}=e;return[t.switchBase,{["& .".concat(v.input)]:t.input},"default"!==a.color&&t["color".concat((0,h.Z)(a.color))]]}})((e=>{let{theme:t}=e;return{position:"absolute",top:0,left:0,zIndex:1,color:t.vars?t.vars.palette.Switch.defaultColor:"".concat("light"===t.palette.mode?t.palette.common.white:t.palette.grey[300]),transition:t.transitions.create(["left","transform"],{duration:t.transitions.duration.shortest}),["&.".concat(v.checked)]:{transform:"translateX(20px)"},["&.".concat(v.disabled)]:{color:t.vars?t.vars.palette.Switch.defaultDisabledColor:"".concat("light"===t.palette.mode?t.palette.grey[100]:t.palette.grey[600])},["&.".concat(v.checked," + .").concat(v.track)]:{opacity:.5},["&.".concat(v.disabled," + .").concat(v.track)]:{opacity:t.vars?t.vars.opacity.switchTrackDisabled:"".concat("light"===t.palette.mode?.12:.2)},["& .".concat(v.input)]:{left:"-100%",width:"300%"}}}),(e=>{let{theme:t,ownerState:a}=e;return(0,r.Z)({"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette.action.activeChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,d.Fq)(t.palette.action.active,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},"default"!==a.color&&{["&.".concat(v.checked)]:{color:(t.vars||t).palette[a.color].main,"&:hover":{backgroundColor:t.vars?"rgba(".concat(t.vars.palette[a.color].mainChannel," / ").concat(t.vars.palette.action.hoverOpacity,")"):(0,d.Fq)(t.palette[a.color].main,t.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},["&.".concat(v.disabled)]:{color:t.vars?t.vars.palette.Switch["".concat(a.color,"DisabledColor")]:"".concat("light"===t.palette.mode?(0,d.$n)(t.palette[a.color].main,.62):(0,d._j)(t.palette[a.color].main,.55))}},["&.".concat(v.checked," + .").concat(v.track)]:{backgroundColor:(t.vars||t).palette[a.color].main}})})),w=(0,m.ZP)("span",{name:"MuiSwitch",slot:"Track",overridesResolver:(e,t)=>t.track})((e=>{let{theme:t}=e;return{height:"100%",width:"100%",borderRadius:7,zIndex:-1,transition:t.transitions.create(["opacity","background-color"],{duration:t.transitions.duration.shortest}),backgroundColor:t.vars?t.vars.palette.common.onBackground:"".concat("light"===t.palette.mode?t.palette.common.black:t.palette.common.white),opacity:t.vars?t.vars.opacity.switchTrack:"".concat("light"===t.palette.mode?.38:.3)}})),Z=(0,m.ZP)("span",{name:"MuiSwitch",slot:"Thumb",overridesResolver:(e,t)=>t.thumb})((e=>{let{theme:t}=e;return{boxShadow:(t.vars||t).shadows[1],backgroundColor:"currentColor",width:20,height:20,borderRadius:"50%"}})),_=n.forwardRef((function(e,t){const a=(0,p.Z)({props:e,name:"MuiSwitch"}),{className:n,color:o="primary",edge:i=!1,size:d="medium",sx:u}=a,m=(0,c.Z)(a,f),g=(0,r.Z)({},a,{color:o,edge:i,size:d}),x=(e=>{const{classes:t,edge:a,size:n,color:o,checked:i,disabled:c}=e,l={root:["root",a&&"edge".concat((0,h.Z)(a)),"size".concat((0,h.Z)(n))],switchBase:["switchBase","color".concat((0,h.Z)(o)),i&&"checked",c&&"disabled"],thumb:["thumb"],track:["track"],input:["input"]},d=(0,s.Z)(l,j,t);return(0,r.Z)({},t,d)})(g),v=(0,b.jsx)(Z,{className:x.thumb,ownerState:g});return(0,b.jsxs)(y,{className:(0,l.Z)(x.root,n),sx:u,ownerState:g,children:[(0,b.jsx)(k,(0,r.Z)({type:"checkbox",icon:v,checkedIcon:v,ref:t,ownerState:g},m,{classes:(0,r.Z)({},x,{root:x.switchBase})})),(0,b.jsx)(w,{className:x.track,ownerState:g})]})}));var S=a(258467),C=a(489332),P=a(561765),z=a(835705),N=a(762611),A=a(366835),R=a(157861),T=a(770941),M=a(619438),I=a(751629),O=a(823477),B=a(924076),L=a(270501),q=a(557829),E=a(731095),D=a(42832),U=a(777970),F=a(275161),V=a(427710),H=a(536287),J=(a(980281),a(585281)),W=a(999519),X=a(861689),Y=a(738085),$=a(966149),G=a(404117),K=a(896467),Q=a(897762),ee=a(233604),te=a(118197);const ae=(0,m.ZP)(T.Z)((e=>{let{theme:t}=e;return{["&.".concat(M.Z.head)]:{backgroundColor:"#1890ff",color:t.palette.common.white},["&.".concat(M.Z.body)]:{fontSize:14}}})),ne=(0,m.ZP)(B.Z)((e=>{let{theme:t}=e;return{"&:nth-of-type(odd)":{backgroundColor:t.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),oe=()=>{const{type:e}=(0,S.UO)(),t=(0,S.s0)(),[a,c]=(0,n.useState)([]),[r,l]=(0,n.useState)(!0),[s,d]=(0,n.useState)(1),[h,u]=(0,n.useState)([]),[p,m]=(0,n.useState)(""),g=async()=>{l(!0);const t=(e=>"incomplete"===e?{isIncomplete:!0}:"delete-user"===e?{isDeleted:!0}:{})(e);try{fetch("".concat(H.ZP.url,"/admin/getUnApprovedPilot"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)},body:JSON.stringify(t)}).then((e=>e.json())).then((e=>{200===e.status&&(u(e.userRecord),c(e.userRecord),l(!1)),l(!1)}))}catch(a){console.log(a),l(!1)}};(0,n.useEffect)((()=>{g()}),[e]);const x=()=>{(0,W.S5)((e=>null===e||void 0===e?void 0:e.map((e=>({"First Name":e.first_name,"Last Name":e.last_name,Email:e.email,"Phone Number":e.phone,Location:e.location,Country:e.country,Role:e.role,Specilization:Array.isArray(e.specilization)?e.specilization.join(", "):e.specilization,company:e.first_name,"Short description":e.short_description,"website link":e.website_link,"Instagram link":e.instagram_link,"Facebook link":e.facebook_link,"Twiter link":e.twitter_link,tiktok_link:e.tiktok_link,Reviews:e.reviews,averageRating:e.averageRating,radius:e.radius,status:e.status,"Extra Area Category":Array.isArray(e.extra_area_category)?e.extra_area_category.join(", "):e.extra_area_category,specification:e.equipment.specification,Drone:Array.isArray(e.equipment.drone)?e.equipment.drone.join(", "):e.equipment.drone,"Camera specification":Array.isArray(e.equipment.camera_specification)?e.equipment.camera_specification.join(", "):e.equipment.camera_specification,payload:e.equipment.payload,"Subcription Plan Name":e.subcription_id,"Create Date":e.created_at}))))(h),"UnApprovedPilotList","UnApprovedPilot")},j=20*s,v=j-20,f=h.slice(v,j);const[y,k]=n.useState(!1),[w,Z]=(0,n.useState)(null),T=()=>{k(!1)};return(0,b.jsx)("div",{children:r?(0,b.jsx)("div",{className:"loader",style:{display:"flex",justifyContent:"center",alignItems:"center"},children:(0,b.jsx)(q.Z,{children:(0,b.jsx)(J.Z,{size:60})})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{className:"dahbard_table top_tab_bar",children:[(0,b.jsx)("div",{children:(0,b.jsx)("h2",{children:"incomplete"===e?"Incomplete Pilot":"delete-user"===e?"Deleted User":"Pilot Request"})}),"delete-user"!==e&&(0,b.jsxs)("div",{className:"input-box",children:[(0,b.jsx)(E.Z,{className:"global_dashbtn text-end me-3",onClick:()=>x(),children:"Export to Excel"}),(0,b.jsx)(i.Z,{id:"demo-helper-text-aligned-no-helper",label:"Search by Name",value:p,onChange:e=>{const t=e.target.value;m(t);const n=a.filter((e=>e.first_name.toLowerCase().includes(t.toLowerCase())));u(n)}})]})]}),(0,b.jsx)(o.ZP,{container:!0,spacing:3,children:(0,b.jsxs)(o.ZP,{item:!0,xs:12,lg:12,children:[(0,b.jsx)(I.Z,{component:L.Z,className:"dahbard_table_inner",children:(0,b.jsxs)(A.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,b.jsx)(O.Z,{children:(0,b.jsxs)(B.Z,{children:[(0,b.jsx)(ae,{align:"left",children:"S.No."}),(0,b.jsx)(ae,{align:"left",children:"Name"}),(0,b.jsx)(ae,{align:"left",children:"Email"}),(0,b.jsx)(ae,{align:"left",children:"Phone"}),(0,b.jsx)(ae,{align:"left",children:"Status"}),(0,b.jsx)(ae,{align:"left",children:"Plan type"}),(0,b.jsx)(ae,{align:"left",children:"Created Date"}),(0,b.jsx)(ae,{align:"left",children:"Send message"}),(0,b.jsx)(ae,{align:"left",children:"IP"}),(0,b.jsx)(ae,{align:"left",children:"Location"}),"delete-user"!==e&&(0,b.jsx)(ae,{align:"center",children:"Action"})]})}),(0,b.jsx)(R.Z,{children:f.map(((a,n)=>(0,b.jsxs)(ne,{style:{background:"Reject"===a.status?"rgba(255, 0, 0, 0.1)":"inherit"},children:[(0,b.jsx)(ae,{component:"th",scope:"row",align:"left",children:20*(s-1)+n+1}),(0,b.jsxs)(ae,{align:"center",children:[a.first_name," ",a.last_name]}),(0,b.jsx)(ae,{align:"center",children:a.email}),(0,b.jsx)(ae,{align:"center",children:a.phone}),(0,b.jsx)(ae,{align:"center",children:(0,b.jsx)(_,{checked:"active"===a.status,onChange:()=>(async e=>{try{const t=localStorage.getItem("jwt");if(!t)return void console.error("No JWT token found");console.log("Toggling status for userId:",e);const a=await fetch("".concat(H.ZP.url,"/admin/restoreUserAccount"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e})});(await a.json()).success&&setRows((t=>t.map((t=>t._id===e?{...t,status:"active"===t.status?"inactive":"active"}:t))))}catch(t){console.error("Error toggling status:",t)}})(a._id),color:"primary"})}),(0,b.jsx)(ae,{align:"center",className:"text-uppercase",children:a.subscription_type}),(0,b.jsx)(ae,{align:"center",children:(0,Y.S)(a.created_at)}),(0,b.jsx)(ae,{align:"center",children:(0,b.jsx)(E.Z,{className:"view_btn action-btn d-block",onClick:()=>function(e){t("".concat(H.ZP.basename,"/sendmessage"),{state:e})}(a),children:(0,b.jsx)(X.Z,{title:"Send message",children:(0,b.jsx)(z.default,{})})})}),(0,b.jsx)(ae,{align:"center",children:null!==a&&void 0!==a&&a.ip?a.ip:"N/A"}),(0,b.jsx)(ae,{align:"center",children:a.location}),"delete-user"!==e&&(0,b.jsx)(ae,{align:"center",children:(0,b.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"11px"},children:[(0,b.jsx)("div",{children:(0,b.jsx)(E.Z,{className:"edit_btn_global action-btn d-block",onClick:()=>{!function(e){try{fetch("".concat(H.ZP.url,"/admin/gettoken/").concat(e._id),{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{"get data successfully"===e.message&&t("".concat(H.ZP.basename,"/utils/updateuser"),{state:{token:e.token,tab:0}})}))}catch(a){console.log(a)}}(a)},children:(0,b.jsx)(X.Z,{title:"Edit",children:(0,b.jsx)(V.default,{})})})}),(0,b.jsx)(E.Z,{className:"view_btn action-btn d-block",onClick:()=>function(e){t("".concat(H.ZP.basename,"/user-details"),{state:e})}(a),children:(0,b.jsx)(X.Z,{title:"View Details",children:(0,b.jsx)(C.default,{})})}),(0,b.jsx)(E.Z,{className:"dlt_btn action-btn d-block",onClick:()=>(async e=>{try{l(!0),fetch("".concat(H.ZP.url,"/admin/rejectPilotByadmin/").concat(e._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{"Reject Pilot successfully"===e.message&&(window.location.reload(),l(!1)),l(!1)}))}catch(t){console.log(t),l(!1)}})(a),children:(0,b.jsx)(X.Z,{title:"Reject User",children:(0,b.jsx)(N.default,{})})}),(0,b.jsx)(E.Z,{className:"edit_btn_global action-btn d-block",onClick:()=>function(e){try{l(!0),fetch("".concat(H.ZP.url,"/admin/approvedPilot/").concat(e._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{"Approved Pilot successfully"===e.message&&(window.location.reload(),l(!1)),l(!1)}))}catch(t){console.log(t),l(!1)}}(a),children:(0,b.jsx)(X.Z,{title:"Approve Pilot",children:(0,b.jsx)(F.default,{})})}),(0,b.jsx)(E.Z,{className:"view_btn action-btn d-block",onClick:()=>function(e){t("/profile-details/".concat(e._id))}(a),children:(0,b.jsx)(X.Z,{title:"Preview",children:(0,b.jsx)(P.default,{})})}),(0,b.jsx)(E.Z,{className:"edit_btn action-btn d-block",onClick:()=>(e=>{k(!0),Z(e)})(a),children:(0,b.jsx)(X.Z,{title:"Mark as incomplete",children:(0,b.jsx)(P.default,{})})})]})})]},a._id)))})]})}),(0,b.jsx)(o.ZP,{container:!0,justifyContent:"center",className:"pageInation_box",children:(0,b.jsx)(o.ZP,{item:!0,xl:6,lg:8,md:10,sm:12,children:(0,b.jsx)(D.Z,{spacing:2,children:(0,b.jsx)(U.Z,{count:Math.ceil(h.length/20),page:s,onChange:(e,t)=>d(t),variant:"outlined",shape:"rounded"})})})})]})}),(0,b.jsxs)($.Z,{open:y,onClose:T,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:[(0,b.jsx)(ee.Z,{id:"alert-dialog-title",children:"Confirmation"}),(0,b.jsx)(K.Z,{children:(0,b.jsx)(Q.Z,{id:"alert-dialog-description",children:"Are you sure you want to move this pilot request to the Incomplete Pilot List? This action will remove it from the Requested Pilot List."})}),(0,b.jsxs)(G.Z,{className:"mx-2",children:[(0,b.jsx)(E.Z,{onClick:T,variant:"outlined",color:"secondary",children:" Cancel"}),(0,b.jsx)(E.Z,{onClick:async()=>{try{var e;const a=await te.b.post("/admin/markUserAsIncomplete",{id:null===w||void 0===w?void 0:w._id});var t;if(200==(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.status))(0,W.dr)(null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.message),k(),g();else(0,W.YE)("Something went wrong! Please try again letter")}catch(o){var a,n;console.log(o),(0,W.YE)(null===o||void 0===o||null===(a=o.response)||void 0===a||null===(n=a.data)||void 0===n?void 0:n.message)}},variant:"contained",color:"primary",autoFocus:!0,children:"Confirm"})]})]})]})})}},275161:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(945045)),i=a(346417),c=(0,o.default)((0,i.jsx)("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox");t.default=c},561765:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(945045)),i=a(346417),c=(0,o.default)([(0,i.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,i.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");t.default=c},762611:(e,t,a)=>{var n=a(564836);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=n(a(945045)),i=a(346417),c=(0,o.default)((0,i.jsx)("path",{d:"m19.98 16.82-.63 4.46c-.14.99-.99 1.72-1.98 1.72h-6.16c-.53 0-1.29-.21-1.66-.59L5 17.62l.83-.84c.24-.24.58-.35.92-.28l3.25.74V6.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5v6h.91c.31 0 .62.07.89.21l4.09 2.04c.77.39 1.21 1.22 1.09 2.07zM12 2.5c4.74 0 7.67 2.52 8.43 4.5H22c-.73-2.88-4.51-6-10-6-3.22 0-6.18 1.13-8.5 3.02V2H2v5h5V5.5H4.09c2.12-1.86 4.88-3 7.91-3z"}),"SwipeLeft");t.default=c}}]);