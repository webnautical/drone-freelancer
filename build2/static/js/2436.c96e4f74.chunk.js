"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[2436],{392436:(e,t,n)=>{n.r(t),n.d(t,{default:()=>I});var s,a=n(617592),l=(n(980281),n(747313)),i=n(597753),r=n(96303),o=n(274636),c=n(745110),d=n(624631),h=n(770941),u=n(619438),g=n(751629),x=n(270501),m=n(731095),p=n(861689),j=n(809019),b=n(557829),f=n(534628),v=n(585281),y=n(258467),w=n(536287),Z=n(427710),_=n(896217),S=n(782036),C=n(999519),P=n(630168),N=n(402905),k=n(346417);const E=N.ZP.div(s||(s=(0,P.Z)(["\n  height: 1rem;\n  vertical-align: bottom;\n  display: inline-block;\n  margin-right: 0.5rem;\n  svg {\n    width: 100%;\n    height: 100%;\n  }\n  cursor: ",";\n"])),(e=>{let{isDragging:t}=e;return t?"grabbing":"grab"})),D=e=>(0,k.jsx)(E,{...e,children:(0,k.jsx)("svg",{"aria-hidden":"true",focusable:"false","data-prefix":"fas","data-icon":"grip-vertical",role:"img",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 320 512",children:(0,k.jsx)("path",{fill:"currentColor",d:"M96 32H32C14.33 32 0 46.33 0 64v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160H32c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zM288 32h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32V64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32zm0 160h-64c-17.67 0-32 14.33-32 32v64c0 17.67 14.33 32 32 32h64c17.67 0 32-14.33 32-32v-64c0-17.67-14.33-32-32-32z"})})});var q,T;const z=N.ZP.td(q||(q=(0,P.Z)(["\n  background: white;\n  &:first-of-type {\n    min-width: 20ch;\n  }\n"]))),A=N.ZP.tr(T||(T=(0,P.Z)(["\n  box-shadow: rgb(0 0 0 / 10%) 0px 20px 25px -5px,\n    rgb(0 0 0 / 30%) 0px 10px 10px -5px;\n  outline: #3e1eb3 solid 1px;\n"]))),H=e=>{let{row:t}=e;return(0,k.jsx)(A,{...t.getRowProps(),children:t.cells.map(((e,t)=>0===t?(0,l.createElement)(z,{...e.getCellProps(),key:t},(0,k.jsx)(D,{isDragging:!0}),(0,k.jsx)("span",{children:e.render("Cell")})):(0,l.createElement)(z,{...e.getCellProps(),key:t},e.render("Cell"))))})};var B,Q,F=n(20790);const L=N.ZP.td(B||(B=(0,P.Z)(["\n  background: rgba(127, 207, 250, 0.3);\n"]))),O=N.ZP.td(Q||(Q=(0,P.Z)(["\n  background: white;\n  &:first-of-type {\n    min-width: 20ch;\n  }\n"]))),R=e=>{let{row:t}=e;const{attributes:n,listeners:s,transform:a,transition:i,setNodeRef:r,isDragging:c}=(0,o.nB)({id:t.original._id}),d={transform:F.ux.Transform.toString(a),transition:i};return(0,k.jsxs)("tr",{ref:r,style:d,...t.getRowProps(),children:[(0,k.jsx)("td",{className:"svg-drags",children:(0,k.jsx)(D,{...n,...s})}),c?(0,k.jsx)(L,{colSpan:t.cells.length,children:"\xa0"}):t.cells.map(((e,t)=>0===t?(0,l.createElement)(O,{...e.getCellProps(),key:t},(0,k.jsx)("span",{children:e.render("Cell")})):(0,l.createElement)(O,{...e.getCellProps(),key:t},e.render("Cell"))))]})};var M=n(118197);const V=(0,a.ZP)(h.Z)((e=>{let{theme:t}=e;return{["&.".concat(u.Z.head)]:{backgroundColor:"#1890ff",color:t.palette.common.white},["&.".concat(u.Z.body)]:{fontSize:14}}}));function I(){const e=(0,y.s0)(),[t,n]=(0,l.useState)(!0),[s,a]=(0,l.useState)(""),[h,u]=(0,l.useState)(""),[P,N]=(0,l.useState)(""),[E,D]=(0,l.useState)(""),[q,T]=(0,l.useState)([]),z=async()=>{n(!0);try{fetch("".concat(w.ZP.url,"/admin/getAllQuation"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{var t,s,a,l;"Get all Queation successfully"===e.message&&(T(null===e||void 0===e||null===(t=e.getallquation[0])||void 0===t?void 0:t.qa),u(null===e||void 0===e||null===(s=e.getallquation[0])||void 0===s?void 0:s._id),N(null===e||void 0===e||null===(a=e.getallquation[0])||void 0===a?void 0:a.baner),D(null===e||void 0===e||null===(l=e.getallquation[0])||void 0===l?void 0:l.image),n(!1));n(!1)}))}catch(e){console.log(e),n(!1)}},[A,B]=(0,l.useState)(null);(0,l.useEffect)((()=>{z()}),[]),(0,l.useEffect)((()=>{A&&Q(A,h)}),[A]);const Q=(e,t)=>{try{fetch("".concat(w.ZP.url,"/admin/deletQuation/").concat(t),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)},body:JSON.stringify({quation_id:e})}).then((e=>e.json())).then((e=>{"Deleted Queation successfully"===e.message&&((0,C.dr)("Deleted Successfully !"),z())}))}catch(n){console.log(n)}},F=l.useMemo((()=>[{Header:"Question",accessor:"quetion"},{Header:"Answer",accessor:"answer"},{Header:(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("p",{className:"text-center",children:"Action"})}),accessor:"Status",Cell:t=>{let{row:n}=t;return(0,k.jsx)(k.Fragment,{children:(0,k.jsx)(V,{align:"center",children:(0,k.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"11px"},children:[(0,k.jsx)(m.Z,{className:"edit_btn_global action-btn d-block",onClick:()=>{e("/admin/utils/addqa",{state:{data:n.original}})},children:(0,k.jsx)(p.Z,{title:"Edit",children:(0,k.jsx)(Z.default,{})})}),(0,k.jsx)(m.Z,{className:"dlt_btn action-btn d-block",onClick:()=>{B(n.original._id)},children:(0,k.jsx)(p.Z,{title:"Delete",children:(0,k.jsx)(_.default,{})})})]})})})}}]),[]),[L,O]=(0,l.useState)(),I=(0,l.useMemo)((()=>null===q||void 0===q?void 0:q.map((e=>{let{_id:t}=e;return t}))),[q]),{getTableProps:W,getTableBodyProps:G,headerGroups:U,rows:Y,prepareRow:J}=(0,c.useTable)({columns:F,data:q}),K=(0,i.Dy)((0,i.VT)(i.MA,{}),(0,i.VT)(i.LO,{}),(0,i.VT)(i.Lg,{}));const X=(0,l.useMemo)((()=>{if(!L)return null;const e=Y.find((e=>{let{original:t}=e;return t._id===L}));return J(e),e}),[L,Y,J]),[$,ee]=(0,l.useState)(0),te=null===Y||void 0===Y?void 0:Y.map((e=>({quetion:e.original.quetion,answer:e.original.answer,suggestions:e.original.suggestions,_id:e.original._id})));(0,l.useEffect)((()=>{te&&$>0&&ne(te)}),[te,$]);const ne=async e=>{try{const t={qaList:e};200!=(await M.b.post("/admin/updatefaqOrder",t)).data.status&&(0,C.YE)("Something Wen't Wrong !!")}catch(t){(0,C.YE)("Something Wen't Wrong !!"),console.log(t)}};return(0,k.jsx)("div",{children:t?(0,k.jsx)("div",{className:"loader",children:(0,k.jsx)(b.Z,{sx:{display:"flex"},children:(0,k.jsx)(v.Z,{size:60})})}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsxs)("div",{className:"top_tab_bar",children:[(0,k.jsx)("div",{children:(0,k.jsx)("h2",{children:"Question & Answers"})}),(0,k.jsxs)("div",{className:"select-box",children:[(0,k.jsx)("div",{className:"input-box",children:(0,k.jsx)(d.Z,{id:"demo-helper-text-aligned-no-helper ",label:"Search by Question",value:s,onChange:e=>{const t=e.target.value;a(t)}})}),(0,k.jsx)("div",{style:{textAlign:"right"},children:(0,k.jsx)(m.Z,{className:"edit_btn action-btn d-block",onClick:()=>{e("".concat(w.ZP.basename,"/utils/addqa"))},children:(0,k.jsx)("div",{className:"global_dashbtn",children:"Add New Question"})})})]})]}),(0,k.jsxs)(j.ZP,{container:!0,className:"pages_global_background mt-4  mb-4 p-4",children:[(0,k.jsx)(j.ZP,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,className:"mt-4 p-2",children:(0,k.jsxs)("div",{className:"file-uploader",children:[(0,k.jsxs)("label",{htmlFor:"file2",className:"global_file_upload_deisgn",children:[(0,k.jsx)(f.default,{}),"Banner Upload Here (Recommended size 1920px x 435px)",(0,k.jsx)("input",{type:"file",id:"file2",accept:"image/*",onChange:e=>{const t=e.target.files[0];if(t){const e=new FileReader;e.onload=e=>{const t=e.target.result;N(t)},e.readAsDataURL(t)}},style:{display:"none"}})]}),P&&(0,k.jsxs)("div",{className:"preview_upload",children:[(0,k.jsx)("h4",{children:"Image Preview"}),(0,k.jsx)("img",{src:P,alt:"Selected"})]})]})}),(0,k.jsx)("div",{style:{textAlign:"right"},children:t?(0,k.jsxs)(m.Z,{className:"global_dashbtn",children:[(0,k.jsx)("div",{className:"spinner-border spinner-border-sm me-1",role:"status"})," Loading ..."]}):(0,k.jsx)(m.Z,{className:"global_dashbtn",onClick:()=>(()=>{n(!0);const e={Id:h,image:E,baner:P};fetch("".concat(w.ZP.url,"/admin/updateQaBaner"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)},body:JSON.stringify(e)}).then((e=>e.json())).then((e=>{console.log(e),"baner update successfully"===e.message?((0,C.dr)("baner update successfully!"),n(!1)):((0,C.YE)("baner not update successfully!"),n(!1)),n(!1)}))})(),children:"Update"})})]}),(0,k.jsx)(g.Z,{component:x.Z,children:(0,k.jsxs)(i.LB,{sensors:K,onDragEnd:function(e){const{active:t,over:n}=e;ee($+1),t.id!==n.id&&T((e=>{const s=I.indexOf(t.id),a=I.indexOf(n.id);return(0,o.Rp)(e,s,a)})),O(null)},onDragStart:function(e){O(e.active.id)},onDragCancel:function(){O(null)},collisionDetection:i.pE,modifiers:[r.DL],children:[(0,k.jsxs)("table",{...W(),style:{width:"100%"},className:"table px-4",children:[(0,k.jsx)("thead",{children:U.map((e=>(0,k.jsx)(k.Fragment,{children:(0,k.jsxs)("tr",{...e.getHeaderGroupProps(),children:[(0,k.jsx)("th",{}),e.headers.map((e=>(0,k.jsx)(k.Fragment,{children:(0,k.jsx)("th",{...e.getHeaderProps(),children:e.render("Header")})})))]})})))}),(0,k.jsx)("tbody",{...G(),children:(0,k.jsx)(o.Fo,{items:I,strategy:o.qw,children:Y.map((e=>(J(e),(0,k.jsx)(R,{row:e},e.original._id))))})})]}),(0,k.jsx)(i.y9,{children:L&&(0,k.jsx)("table",{style:{width:"100%"},className:"table px-4",children:(0,k.jsx)("tbody",{children:(0,k.jsx)(H,{row:X})})})})]})}),(0,k.jsx)(S.Ix,{position:"top-center"})]})})}}}]);