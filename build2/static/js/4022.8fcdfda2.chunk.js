"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[4022],{414022:(e,l,t)=>{t.r(l),t.d(l,{default:()=>W});var i=t(809019),s=t(301550),a=t(624631),n=t(617592),d=t(366835),r=t(157861),c=t(770941),o=t(619438),h=t(751629),m=t(823477),x=t(924076),u=t(270501),j=t(747313),g=t(731095),v=t(42832),p=t(777970),b=t(551997),_=t(534628),Z=t(861689),f=t(427710),N=t(999519),y=t(400718),C=t(738085),P=t(329814),k=t(118197),w=t(346417);const S=(0,n.ZP)(c.Z)((e=>{let{theme:l}=e;return{["&.".concat(o.Z.head)]:{backgroundColor:"#1890ff",color:l.palette.common.white},["&.".concat(o.Z.body)]:{fontSize:14}}})),A=(0,n.ZP)(x.Z)((e=>{let{theme:l}=e;return{"&:nth-of-type(odd)":{backgroundColor:l.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),W=()=>{const[e,l]=(0,j.useState)(null),[t,n]=(0,j.useState)(1),[c,o]=(0,j.useState)(!1),[W,I]=(0,j.useState)([]),R=async()=>{o(!0);try{const e=await k.b.get("/admin/getAdvertise");200==e.data.status?(console.log("getAdvertise",e),I(e.data.advertisements),o(!1)):(I([]),o(!1))}catch(e){console.log(e),o(!1)}};(0,j.useEffect)((()=>{R()}),[]);const z=20*t,B=z-20,D=null===W||void 0===W?void 0:W.slice(B,z),[E,F]=(0,j.useState)({}),[U,L]=(0,j.useState)({title:"",redirect_url:"",image:""});(0,j.useEffect)((()=>{null!==E&&void 0!==E&&E._id?L({...U,id:null===E||void 0===E?void 0:E._id,title:null===E||void 0===E?void 0:E.title,redirect_url:null===E||void 0===E?void 0:E.redirect_url,image:(0,N.BC)()+"/files/"+(null===E||void 0===E?void 0:E.image)}):L({...U,id:"",title:"",redirect_url:"",image:""})}),[E]);const M=e=>{L({...U,[e.target.name]:e.target.value})};return(0,w.jsx)(P.Z,{children:(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"dahbard_table top_tab_bar",children:[(0,w.jsx)("div",{children:(0,w.jsx)("h2",{children:"Advertisement"})}),(0,w.jsx)("div",{className:"input-box",children:(0,w.jsx)(g.Z,{className:"global_dashbtn text-end me-3",onClick:()=>l(!e),children:" Add Advertisement"})})]}),(0,w.jsx)(i.ZP,{container:!0,spacing:3,children:c?(0,w.jsx)(y.ZP,{}):(0,w.jsx)(w.Fragment,{children:e?(0,w.jsx)(i.ZP,{container:!0,style:{justifyContent:"center"},className:"mt-3",children:(0,w.jsx)(i.ZP,{item:!0,xs:8,className:"box",children:(0,w.jsxs)(i.ZP,{className:"pages_global_background p-4",container:!0,sx:{my:1},children:[(0,w.jsxs)(i.ZP,{item:!0,sm:12,xs:12,className:"p-2",children:[(0,w.jsx)("span",{className:"admin_label",children:"Title"}),(0,w.jsx)(s.Z,{fullWidth:!0,children:(0,w.jsx)(a.Z,{variant:"outlined",name:"title",value:U.title,onChange:M})})]}),(0,w.jsxs)(i.ZP,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,className:"p-2",children:[(0,w.jsx)("span",{className:"admin_label",children:"Redirect URL"}),(0,w.jsx)(s.Z,{fullWidth:!0,children:(0,w.jsx)(a.Z,{variant:"outlined",name:"redirect_url",value:U.redirect_url,onChange:M})})]}),(0,w.jsx)(i.ZP,{item:!0,xl:12,lg:12,md:12,sm:12,xs:12,className:"mb-4 p-2",children:(0,w.jsxs)(s.Z,{fullWidth:!0,children:[(0,w.jsx)("div",{className:"file-uploader",children:(0,w.jsxs)("label",{htmlFor:"file20",className:"global_file_upload_deisgn",children:[(0,w.jsx)(_.default,{}),"Breadcrumb Image (Recommended size 306px x 368px)",(0,w.jsx)("input",{type:"file",id:"file20",accept:"image/*",onChange:e=>{const l=e.target.files[0];if(l){const e=new FileReader;e.onload=e=>{const l=e.target.result;L((e=>({...e,image:l})))},e.readAsDataURL(l)}}})]})}),U.image&&(0,w.jsxs)("div",{className:"preview_upload",children:[(0,w.jsx)("h4",{children:"Image Preview"}),(0,w.jsx)("img",{src:U.image,alt:"Selected",style:{maxWidth:"200px"}})]})]})}),(0,w.jsxs)(i.ZP,{item:!0,xs:12,className:"text-end mx-2",children:[(0,w.jsx)(g.Z,{className:"global_dashbtn mx-2",onClick:()=>(l(!1),L({...U,image:"",redirect_url:"",title:"",id:""}),void F(null)),children:"Cancel"}),c?(0,w.jsxs)(g.Z,{className:"global_dashbtn",children:[(0,w.jsx)("div",{className:"spinner-border spinner-border-sm me-1",role:"status"})," Loading ..."]}):(0,w.jsx)(g.Z,{className:"global_dashbtn",onClick:()=>(async()=>{const e=E?"updateAdvertiseById":"addAdvertise",t=await k.b.post("/admin/".concat(e),U);var i;200===(null===t||void 0===t?void 0:t.status)?((0,N.dr)(null===t||void 0===t||null===(i=t.data)||void 0===i?void 0:i.message),l(!1),R()):(0,N.YE)("Something Wen't Wrong !!")})(),children:E?"Update":"Save"})]})]})})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)(i.ZP,{item:!0,xs:12,lg:12,children:(0,w.jsx)(h.Z,{component:u.Z,children:(0,w.jsxs)(d.Z,{sx:{minWidth:700},"aria-label":"customized table",children:[(0,w.jsx)(m.Z,{children:(0,w.jsxs)(x.Z,{children:[(0,w.jsx)(S,{align:"center",children:"S.No."}),(0,w.jsx)(S,{children:"Image"}),(0,w.jsx)(S,{children:"Title"}),(0,w.jsx)(S,{children:"URL"}),(0,w.jsx)(S,{children:"Date"}),(0,w.jsx)(S,{align:"center",children:"Action"})]})}),(0,w.jsx)(r.Z,{children:null===D||void 0===D?void 0:D.map(((e,i)=>(0,w.jsxs)(A,{children:[(0,w.jsx)(S,{component:"th",scope:"row",align:"center",children:20*(t-1)+i+1}),(0,w.jsx)(S,{children:(0,w.jsx)("img",{src:(0,N.BC)()+"/files/"+e.image,alt:"",style:{height:"60px",width:"60px"}})}),(0,w.jsx)(S,{children:e.title}),(0,w.jsx)(S,{children:e.redirect_url}),(0,w.jsx)(S,{children:(0,C.S)(e.created_at)}),(0,w.jsx)(S,{align:"left",children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"10px"},children:[(0,w.jsx)(g.Z,{className:"edit_btn_global action-btn d-block",onClick:t=>function(e,t){F(t),l(!0)}(0,e),children:(0,w.jsx)(Z.Z,{title:"Edit",children:(0,w.jsx)(f.default,{})})}),(0,w.jsx)(g.Z,{className:"view_btn action-btn d-block",onClick:()=>(async e=>{const l=await k.b.post("/admin/deleteAdvertiseById",{id:e._id});var t;200===(null===l||void 0===l?void 0:l.status)?((0,N.dr)(null===l||void 0===l||null===(t=l.data)||void 0===t?void 0:t.message),R()):(0,N.YE)("Something Wen't Wrong !!")})(e),children:(0,w.jsx)(Z.Z,{title:"View User Details",children:(0,w.jsx)(b.default,{})})})]})})]},e._id)))})]})})}),(0,w.jsx)(i.ZP,{container:!0,justifyContent:"center",className:"pageInation_box",children:(0,w.jsx)(i.ZP,{item:!0,xl:6,lg:8,md:10,sm:12,children:(0,w.jsx)(v.Z,{spacing:2,children:(0,w.jsx)(p.Z,{count:Math.ceil(W.length/20),page:t,onChange:(e,l)=>n(l),variant:"outlined",shape:"rounded"})})})})]})})})]})})}},551997:(e,l,t)=>{var i=t(564836);Object.defineProperty(l,"__esModule",{value:!0}),l.default=void 0;var s=i(t(945045)),a=t(346417),n=(0,s.default)((0,a.jsx)("path",{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"}),"Delete");l.default=n}}]);