"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[883],{240883:(e,n,t)=>{t.r(n),t.d(n,{default:()=>P});var a=t(809019),i=t(329814),l=t(644002),s=t(617592),c=t(366835),r=t(157861),d=t(731095),o=t(770941),h=t(619438),m=t(751629),x=t(823477),u=t(924076),j=t(270501),v=t(747313),g=t(301550),_=t(815103),p=t(524256),Z=t(37843),f=t(51405),b=t(42832),w=t(777970),y=t(536287),D=(t(980281),t(999519)),N=t(738085),C=t(346417);const S=(0,s.ZP)(o.Z)((e=>{let{theme:n}=e;return{["&.".concat(h.Z.head)]:{backgroundColor:"#1890ff",color:n.palette.common.white},["&.".concat(h.Z.body)]:{fontSize:14}}})),k=(0,s.ZP)(u.Z)((e=>{let{theme:n}=e;return{"&:nth-of-type(odd)":{backgroundColor:n.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),P=()=>{const[e,n]=(0,v.useState)(!1),[t,s]=(0,v.useState)(1),[o,h]=(0,v.useState)([]),[P,A]=(0,v.useState)([]),[E,I]=(0,v.useState)("selectNothing");(0,v.useEffect)((()=>{if("selectNothing"===E)h(P);else if("week"===E){const e=new Date,n=new Date(e);n.setDate(e.getDate()-7);const t=P.filter((t=>new Date(t.created_at)>=n&&new Date(t.created_at)<=e));h(t)}else if("month"===E){const e=new Date,n=new Date(e);n.setDate(e.getDate()-30);const t=P.filter((t=>new Date(t.created_at)>=n&&new Date(t.created_at)<=e));h(t)}else{const e=new Date,n=new Date(e);n.setDate(e.getDate()-365);const t=P.filter((t=>new Date(t.created_at)>=n&&new Date(t.created_at)<=e));h(t)}}),[o,E,P]),(0,v.useEffect)((()=>{(async()=>{n(!0);try{fetch("".concat(y.ZP.url,"/admin/getAlltransaction"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{200===e.status&&(h(null===e||void 0===e?void 0:e.alltransaction),A(null===e||void 0===e?void 0:e.alltransaction),n(!1))}))}catch(e){console.log(e),n(!1)}})()}),[]);const T=20*t,F=T-20,z=o.slice(F,T);return(0,C.jsx)(C.Fragment,{children:e?(0,C.jsx)(D.Hu,{}):(0,C.jsxs)(i.Z,{children:[(0,C.jsxs)("div",{className:"top_tab_bar",children:[(0,C.jsx)("div",{children:(0,C.jsx)("h2",{children:"All Transaction"})}),(0,C.jsxs)("div",{className:"d-flex align-items-center",children:[(0,C.jsx)(d.Z,{className:"global_dashbtn",onClick:()=>{(0,D.S5)((e=>null===e||void 0===e?void 0:e.map((e=>({"Transaction Id":e.transaction_id,Status:e.status,"First Name":e.invoice_details.first_name,"Last Name":e.invoice_details.last_name,"Company Name":e.invoice_details.company_name,Email:e.invoice_details.email,ABN:e.invoice_details.abn,Address:e.invoice_details.address,Amount:e.amount,"Payment Method":"","Plan Name":e.plan_id,"Extra Category":e.extra_category,Date:e.created_at}))))(o),"Transactionlist","Transaction")},children:"Export to Excel"}),(0,C.jsx)("div",{className:"input-box",children:(0,C.jsx)("div",{className:"option_bar",children:(0,C.jsx)("div",{style:{},children:(0,C.jsxs)(g.Z,{sx:{m:1,width:300},children:[(0,C.jsx)(_.Z,{id:"demo-multiple-name-label",children:"Filter"}),(0,C.jsxs)(p.Z,{labelId:"demo-multiple-name-label",id:"demo-multiple-name",value:E,onChange:e=>{I(e.target.value)},input:(0,C.jsx)(Z.Z,{label:"Filter"}),children:[(0,C.jsx)(f.Z,{value:"selectNothing",children:"Filter by date"}),(0,C.jsx)(f.Z,{value:"week",children:"Last week "}),(0,C.jsx)(f.Z,{value:"month",children:"Last Month"}),(0,C.jsx)(f.Z,{value:"year",children:"Last Year"})]})]})})})})]})]}),(0,C.jsx)(a.ZP,{container:!0,spacing:3,children:(0,C.jsxs)(a.ZP,{item:!0,xs:12,lg:12,children:[(0,C.jsx)(m.Z,{component:j.Z,children:(0,C.jsxs)(c.Z,{"aria-label":"customized table",children:[(0,C.jsx)(x.Z,{children:(0,C.jsxs)(u.Z,{children:[(0,C.jsx)(S,{align:"center",children:"S.No."}),(0,C.jsx)(S,{align:"center",children:"Fullname"}),(0,C.jsx)(S,{align:"center",children:"Address"}),(0,C.jsx)(S,{align:"center",children:"Company Name"}),(0,C.jsx)(S,{align:"center",children:"Invoice"}),(0,C.jsx)(S,{align:"center",children:"ABN"}),(0,C.jsx)(S,{align:"center",children:"Transaction Id"}),(0,C.jsx)(S,{align:"center",children:"Status"}),(0,C.jsx)(S,{align:"center",children:"Amount"}),(0,C.jsx)(S,{align:"center",children:"Payment Method"}),(0,C.jsx)(S,{align:"center",children:"Plan Name"}),(0,C.jsx)(S,{align:"center",children:"Extra Category"}),(0,C.jsx)(S,{align:"center",children:"Date"})]})}),(0,C.jsx)(r.Z,{children:z.map(((e,n)=>{var a,i,s,c,r,o,h,m,x,u,j;return(0,C.jsxs)(k,{children:[(0,C.jsx)(S,{component:"th",scope:"row",align:"center",children:20*(t-1)+n+1}),(0,C.jsx)(S,{align:"center",children:null!==(a=e.invoice_details)&&void 0!==a&&a.first_name?(null===(i=e.invoice_details)||void 0===i?void 0:i.first_name)+" "+(null===(s=e.invoice_details)||void 0===s?void 0:s.last_name):"---"}),(0,C.jsx)(S,{align:"center",children:null!==(c=e.invoice_details)&&void 0!==c&&c.address?null===(r=e.invoice_details)||void 0===r?void 0:r.address:"---"}),(0,C.jsx)(S,{align:"center",children:null!==(o=e.invoice_details)&&void 0!==o&&o.company_name?null===(h=e.invoice_details)||void 0===h?void 0:h.company_name:"---"}),(0,C.jsx)(S,{align:"center",children:(0,C.jsx)(d.Z,{variant:"contained",onClick:()=>(e=>{const n=e.replace("public/","");window.open((0,D.BC)()+"/"+n,"_blank")})(null===e||void 0===e?void 0:e.invoice),size:"small",className:"text-uppercase",endIcon:(0,C.jsx)(l.default,{}),children:"Inovoice"})}),(0,C.jsx)(S,{align:"center",children:null!==(m=e.invoice_details)&&void 0!==m&&m.abn?null===(x=e.invoice_details)||void 0===x?void 0:x.abn:"---"}),(0,C.jsx)(S,{align:"center",children:e.transaction_id}),(0,C.jsx)(S,{align:"center",children:e.status}),(0,C.jsx)(S,{align:"center",children:e.amount}),(0,C.jsx)(S,{align:"center",className:"text-uppercase",children:e.payment_method}),(0,C.jsx)(S,{align:"center",children:e.plan_id}),(0,C.jsxs)(S,{align:"center",children:[" ",null!==(u=null===(j=e.extra_category)||void 0===j?void 0:j.join(", "))&&void 0!==u?u:""]}),(0,C.jsx)(S,{align:"center",children:(0,N.S)(e.created_at)})]},e._id)}))})]})}),(0,C.jsx)(a.ZP,{container:!0,justifyContent:"center",className:"pageInation_box",children:(0,C.jsx)(a.ZP,{item:!0,xl:6,lg:8,md:10,sm:12,children:(0,C.jsx)(b.Z,{spacing:2,children:(0,C.jsx)(w.Z,{count:Math.ceil(o.length/20),page:t,onChange:(e,n)=>s(n),variant:"outlined",shape:"rounded"})})})})]})})]})})}}}]);