"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[4146],{84146:(e,a,t)=>{t.r(a),t.d(a,{default:()=>Z});var s=t(747313),n=t(809019),i=t(261113),l=t(222102),o=t(763849),r=t(431616),c=t(41995),d=t(853768),u=t(840578),h=t(999519),m=t(258467),p=t(51405),x=t(301550),v=t(524256),g=t(37843),_=t(815103),j=t(644758),y=t(483213),b=t(400718),N=t(536287),S=t(118197),w=t(346417);const P={PaperProps:{style:{maxHeight:224,width:250}}},Z=()=>{const e=(0,m.s0)(),[a,t]=(0,s.useState)([]),[Z,f]=(0,s.useState)(),[C,k]=(0,s.useState)(!1),[T,A]=(0,s.useState)(!1),[E,F]=(0,s.useState)({}),[W,z]=(0,s.useState)({}),[B,H]=(0,s.useState)([]),[D,G]=(0,s.useState)({});(0,s.useEffect)((()=>{(async()=>{k(!0);try{var e;const a={user_type:"pilot"},s=await fetch("".concat(N.ZP.url,"/admin/getSubscriptionPlan"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===(e=(0,h.T8)())||void 0===e?void 0:e.jwt)},body:JSON.stringify(a)});if(!s.ok)throw new Error("HTTP error! Status: ".concat(s.status));const n=await s.json();200==n.status?(Y(),f(null===n||void 0===n?void 0:n.priceExtra),t(null===n||void 0===n?void 0:n.getsubscriptionpane),k(!1)):((0,h.YE)("Something Wen't Wrong !!"),k(!1))}catch(a){console.log(a),k(!1),t([])}})(),(async()=>{k(!0);try{var e;const a=await fetch("".concat(N.ZP.url,"/user/getPlandatas"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(null===(e=(0,h.T8)())||void 0===e?void 0:e.jwt)}});if(!a.ok)throw new Error("HTTP error! Status: ".concat(a.status));const t=await a.json();console.log(t),200==t.status?(z(null===t||void 0===t?void 0:t.getplanss[0]),k(!1)):((0,h.YE)("Something Wen't Wrong !!"),k(!1))}catch(a){console.log(a),z({}),k(!1)}})(),Y(),(async()=>{try{fetch("".concat(N.ZP.url,"/admin/getAllJobCategory"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{"get category data successfully"===e.message&&H(e.getCategory)}))}catch(e){console.log(e),H([])}})()}),[]);const I=a=>{e("/user/plans/purchase",{state:{data:{planDetails:a,extraCategory:D,extraCatAmount:Z}}})},M=null===W||void 0===W?void 0:W.end_date,O=new Date(M)-new Date,U=Math.ceil(O/864e5);console.log(U);const Y=async()=>{try{const e=await S.b.post("user/getPilotProfile");200==e.data.status&&F(e.data.getacceptedjob[0])}catch(e){console.log(e)}};return(0,w.jsx)("div",{children:(0,w.jsxs)(n.ZP,{container:!0,children:[(0,w.jsx)(n.ZP,{item:!0,xs:12,sx:{mt:3.25},children:(0,w.jsx)(i.Z,{variant:"h5",className:"global_top_head",children:"Plans"})}),(0,w.jsx)("div",{className:"top_box pilot_plan_subs plans_box inner_pricing pricing_main bg-white w-100",children:(0,w.jsx)("section",{className:"flex_plans",children:(0,w.jsx)(l.Z,{children:C?(0,w.jsx)(b.ZP,{}):(0,w.jsx)(o.Z,{className:" mt-2",children:null===a||void 0===a?void 0:a.map(((a,t)=>{var s,n,i;return(0,w.jsx)(w.Fragment,{children:(0,w.jsxs)(r.Z,{className:"mb-4",md:"4",children:[(0,w.jsxs)("div",{className:"plan_det_box ".concat("Silver"==(null===a||void 0===a?void 0:a.plan_name)?"best_plan":""),children:[(0,w.jsxs)("div",{className:"pricing",children:[(0,w.jsx)("h3",{className:"text-capitalize",children:null===a||void 0===a?void 0:a.plan_name}),(0,w.jsxs)("div",{className:"price_month",children:[(0,w.jsxs)("p",{className:"text_price",children:["$",null===a||void 0===a?void 0:a.amount," AUD"]}),(0,w.jsx)("p",{className:"text_month",children:"/Month"})]}),(0,w.jsx)("p",{children:a.plan_description})]}),(0,w.jsxs)("ul",{className:"includes",children:[(0,w.jsx)("h2",{children:"Included"}),null===a||void 0===a||null===(s=a.included_point)||void 0===s?void 0:s.map(((e,a)=>(0,w.jsxs)("li",{children:[(0,w.jsx)("img",{src:c,alt:"logo",style:{maxWidth:"",maxHeight:""}}),e]},a)))]}),(0,w.jsx)("div",{className:"text-center",children:0==a.amount?T?(0,w.jsx)(h.GH,{}):(0,w.jsx)(w.Fragment,{children:"free"==(null===E||void 0===E?void 0:E.subscription_type)?(0,w.jsx)("button",{className:"global_btn height_margin",children:"Current Plan"}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("div",{className:"mt-2",children:(0,w.jsx)("strong",{children:"A Silver or Gold plan is required to purchase extra categories."})}),(0,w.jsx)("button",{className:"global_btn height_margin",onClick:()=>(async a=>{A(!0);const t={plan_id:null===a||void 0===a?void 0:a._id,transaction_id:"",extra_category_radius:[],paymentstatus:"Success",amount:a.amount};try{const n=await S.b.post("/user/createSubscriptionByUser",t);if(200==n.data.status){var s;A(!1);const t={plan_id:null===a||void 0===a?void 0:a._id,plan_name:null===a||void 0===a?void 0:a.plan_name,transaction_id:null===(s=n.data)||void 0===s?void 0:s.subscription_id,paymentstatus:"Success",amount:a.amount};e("/user/plans/success",{state:{data:t}})}}catch(n){400==n.response.status?(0,h.YE)(n.response.data.message):(0,h.YE)("API : Something Went Wrong"),A(!1)}})(a),children:" Get Started "})]})}):(0,w.jsx)(w.Fragment,{children:(null===E||void 0===E?void 0:E.subscription_type)==(null===a||void 0===a?void 0:a.plan_name)?(0,w.jsx)("button",{className:"global_btn height_margin ",children:"Current Plan"}):(0,w.jsx)("button",{className:"global_btn height_margin",onClick:()=>I(a),children:"Purchase"})})})]}),(0,w.jsxs)("div",{className:0!=(null===a||void 0===a?void 0:a.unlimited_radius)?"estra_cate_purchase":"",children:[(0,w.jsx)("div",{className:"text-start my-3 px-2 mt-0",children:"Silver"==(null===a||void 0===a?void 0:a.plan_name)?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{className:"my-0 py-0",children:"Expand your reach :"}),(0,w.jsxs)("strong",{children:["Add extra categories for $",Z," each and see opportunities within an unlimited radius."]})]}):"Gold"==(null===a||void 0===a?void 0:a.plan_name)?(0,w.jsxs)(w.Fragment,{children:[(0,w.jsx)("p",{className:"my-0 py-0",children:"Maximize your opportunities :"}),(0,w.jsxs)("strong",{children:["Add extra categories for $",Z," each and see opportunities within an unlimited radius."]})]}):(0,w.jsx)(w.Fragment,{})}),0!=(null===a||void 0===a?void 0:a.unlimited_radius)&&(0,w.jsx)("div",{className:"advance_option mb-0",children:(0,w.jsx)(d.Z,{children:(0,w.jsxs)(d.Z.Item,{eventKey:"0",children:[(0,w.jsx)(d.Z.Header,{children:"Buy extra categories - Unlimited radius"}),(0,w.jsxs)("h6",{className:"text-capitalize text-danger ",children:["$",Z," AUD per categories"]}),(0,w.jsxs)(d.Z.Body,{children:[(0,w.jsx)(u.Z,{children:(0,w.jsxs)(x.Z,{sx:{m:1,width:300},className:"mb-2 check_select_outer w-100",children:[(0,w.jsx)(_.Z,{id:"demo-multiple-checkbox-label",children:"Choose Category"}),(0,w.jsx)(v.Z,{labelId:"demo-multiple-checkbox-label",id:"demo-multiple-checkbox",multiple:!0,value:D[a._id]||[],onChange:e=>{return t=a._id,s=e.target.value,void G((e=>({...e,[t]:s})));var t,s},input:(0,w.jsx)(g.Z,{label:"Tag"}),renderValue:e=>e.join(", "),MenuProps:P,className:"check_select ",children:null===B||void 0===B?void 0:B.filter((e=>{var a;return!(null!==E&&void 0!==E&&null!==(a=E.extra_area_category)&&void 0!==a&&a.includes(e.category_name))})).map((e=>{var t;return(0,w.jsxs)(p.Z,{value:e.category_name,children:[(0,w.jsx)(j.Z,{checked:null===(t=D[a._id])||void 0===t?void 0:t.includes(e.category_name)}),(0,w.jsx)(y.Z,{primary:e.category_name})]},e.category_name)}))})]})}),(0,w.jsxs)("div",{className:"Added_new_cat",children:[(0,w.jsx)("ul",{className:"p-0",children:null===(n=D[a._id])||void 0===n?void 0:n.map(((e,a)=>(0,w.jsxs)("li",{children:[" ",e]},a)))}),(null===(i=D[a._id])||void 0===i?void 0:i.length)>0&&(0,w.jsx)(w.Fragment,{children:(0,w.jsx)("button",{className:"global_btn text-",onClick:()=>I(a),children:"Purchase"})})]})]})]})})})]})]},t)})}))})})})})]})})}}}]);