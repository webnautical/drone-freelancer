"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[4658],{184658:(e,l,a)=>{a.r(l),a.d(l,{default:()=>A});var s=a(809019),t=a(624631),n=a(258467),i=a(329814),c=a(617592),r=a(366835),d=a(157861),o=a(770941),h=a(619438),x=a(751629),u=a(823477),j=a(924076),m=a(270501),p=a(644758),b=a(183929),g=a(747313),f=a(557829),v=a(731095),Z=a(896217),y=a(427710),k=a(536287),_=a(431616),C=a(861689),N=(a(980281),a(585281)),P=a(118197),S=a(999519),w=a(346417);const T=(0,c.ZP)(o.Z)((e=>{let{theme:l}=e;return{["&.".concat(h.Z.head)]:{backgroundColor:"#1890ff",color:l.palette.common.white},["&.".concat(h.Z.body)]:{fontSize:14}}})),z=(0,c.ZP)(j.Z)((e=>{let{theme:l}=e;return{"&:nth-of-type(odd)":{backgroundColor:l.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),A=()=>{const e=(0,n.s0)(),[l,a]=(0,g.useState)([]),[c,o]=(0,g.useState)(!0),[h,A]=(0,g.useState)([]),[E,F]=(0,g.useState)(""),[q,D]=(0,g.useState)(!1),[M,I]=(0,g.useState)(!1);(0,g.useEffect)((()=>{(async()=>{o(!0);try{fetch("".concat(k.ZP.url,"/admin/getSubscriptionPlan"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{"Get Subscription Plan successfully"===e.message&&(A(e.getsubscriptionpane),a(e.getsubscriptionpane),o(!1)),o(!1)}))}catch(e){console.log(e),o(!1)}})(),G()}),[]);const[L,O]=(0,g.useState)([]),[W,B]=(0,g.useState)([]),G=async()=>{try{var e;const s=await P.b.get("/admin/getPlanComparison");var l,a;if(200==(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.status))B(null===s||void 0===s||null===(l=s.data)||void 0===l?void 0:l.comparison),O(null===s||void 0===s||null===(a=s.data)||void 0===a?void 0:a.comparison);else B([])}catch(s){console.log(s)}},[R,U]=(0,g.useState)({title:"",subtitle:"",free:!1,purchased:!1}),Y=e=>{"free"==e.target.name?U({...R,free:e.target.checked}):"purchased"==e.target.name?U({...R,purchased:e.target.checked}):U({...R,[e.target.name]:e.target.value})};return(0,w.jsx)("div",{children:c?(0,w.jsx)("div",{className:"loader",children:(0,w.jsx)(f.Z,{sx:{display:"flex"},children:(0,w.jsx)(N.Z,{size:60})})}):(0,w.jsxs)(w.Fragment,{children:[(0,w.jsxs)("div",{className:"top_tab_bar",children:[(0,w.jsx)("div",{children:(0,w.jsx)("h2",{children:"Subscription Plan"})}),(0,w.jsxs)("div",{className:"option_bar",children:[(0,w.jsx)("div",{className:"",children:(0,w.jsx)(v.Z,{className:" global_dashbtn d-block",onClick:()=>D("planCompare"),children:(0,w.jsx)("div",{children:"Plan Compare "})})}),(0,w.jsx)("div",{className:"input-box",children:(0,w.jsx)(t.Z,{id:"demo-helper-text-aligned-no-helper ",label:"Search by Plan",value:E,onChange:e=>{const a=e.target.value;F(a);const s=l.filter((e=>e.plan_name.toLowerCase().includes(a.toLowerCase())));A(s)}})})]})]}),(0,w.jsx)(i.Z,{children:(0,w.jsx)(s.ZP,{container:!0,spacing:3,children:q?(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.ZP,{container:!0,style:{justifyContent:"left"},children:(0,w.jsx)(s.ZP,{item:!0,xs:12,className:"box mt-3 mx-3",children:(0,w.jsxs)(s.ZP,{className:"pages_global_background p-4",container:!0,sx:{my:1},children:[(0,w.jsxs)(r.Z,{sx:{minWidth:700},"aria-label":"customized table",className:"dahbard_table_inner",children:[(0,w.jsx)(u.Z,{children:(0,w.jsxs)(j.Z,{children:[(0,w.jsx)(T,{children:"Title"}),(0,w.jsx)(T,{children:"Sub Title"}),(0,w.jsx)(T,{align:"left",children:"Free"}),(0,w.jsx)(T,{align:"left",children:"Purchased"}),(0,w.jsx)(T,{align:"left",children:"Action"})]})}),(0,w.jsxs)(d.Z,{children:[W.map(((e,l)=>(0,w.jsxs)(z,{children:[(0,w.jsx)(T,{children:e.title}),(0,w.jsx)(T,{children:e.subtitle}),(0,w.jsx)(T,{align:"left",children:(0,w.jsx)(p.Z,{disabled:!(null!==e&&void 0!==e&&e.free),checked:null===e||void 0===e?void 0:e.free})}),(0,w.jsx)(T,{align:"left",children:(0,w.jsx)(p.Z,{disabled:!(null!==e&&void 0!==e&&e.purchased),checked:null===e||void 0===e?void 0:e.purchased})}),(0,w.jsx)(T,{align:"left",children:(0,w.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",alignItems:"center",gap:"11px"},children:[(0,w.jsx)(v.Z,{className:"edit_btn_global action-btn d-block",onClick:()=>((e,l)=>{U({key:e,...l}),I(!0)})(l,e),children:(0,w.jsx)(C.Z,{title:"Edit",children:(0,w.jsx)(y.default,{})})}),(0,w.jsx)(v.Z,{className:"dlt_btn action-btn d-block",onClick:()=>(e=>{const l=[...W];l.splice(e,1),B(l)})(l),children:(0,w.jsx)(C.Z,{title:"Delete",children:(0,w.jsx)(Z.default,{})})})]})})]},l))),M&&(0,w.jsxs)(z,{children:[(0,w.jsx)(T,{children:(0,w.jsxs)("div",{className:"group error",children:[(0,w.jsx)("textarea",{className:"inputMaterial",type:"text",name:"title",placeholder:"Title",value:R.title,onChange:Y,required:!0}),(0,w.jsx)("span",{className:"bar"})]})}),(0,w.jsx)(T,{align:"center",children:(0,w.jsxs)("div",{className:"group error",children:[(0,w.jsx)("textarea",{className:"inputMaterial",type:"text",name:"subtitle",placeholder:"Sub Title",value:R.subtitle,onChange:Y,required:!0}),(0,w.jsx)("span",{className:"bar"})]})}),(0,w.jsx)(T,{align:"center",children:(0,w.jsx)(b.Z,{control:(0,w.jsx)(p.Z,{checked:R.free,name:"free",className:"ms-4",onChange:Y})})}),(0,w.jsx)(T,{align:"center",children:(0,w.jsx)(b.Z,{control:(0,w.jsx)(p.Z,{checked:R.purchased,name:"purchased",className:"ms-4",onChange:Y})})}),(0,w.jsx)(T,{align:"center"})]})]})]}),(0,w.jsxs)(_.Z,{md:12,className:"text-end mt-2",children:[(0,w.jsx)("button",{className:"global_dashbtn",onClick:()=>(U({...R,free:!1,purchased:!1,title:"",subtitle:""}),D(!1),I(!1),void B(L)),children:"Cancel"}),(0,w.jsx)("button",{className:"global_dashbtn mx-2",onClick:()=>(()=>{if(""!==R.title){const e=[...W,R];B(e),U({...R,free:!1,purchased:!1,title:"",subtitle:""})}else M&&(0,S.YE)("Title and Sub Title are required !!"),I(!0)})(),children:"Add More"}),(0,w.jsx)("button",{className:"global_dashbtn",onClick:async()=>{try{let l={comparison:W};if(void 0!==R.key&&R.key>=0&&R.key<W.length){const e=R.key,a=[...W];a[e]=R,l.comparison=a}else l.comparison=[...W,R];const a=await P.b.post("/admin/saveOrUpdateComparison",l);var e;if(200===(null===a||void 0===a?void 0:a.data.status))(0,S.dr)(null===a||void 0===a||null===(e=a.data)||void 0===e?void 0:e.message),G(),I(!1),U({...R,free:!1,purchased:!1,title:"",subtitle:"",key:null})}catch(l){console.log(l)}},children:"Save"})]})]})})})}):(0,w.jsx)(w.Fragment,{children:(0,w.jsx)(s.ZP,{item:!0,xs:12,lg:12,children:(0,w.jsx)(x.Z,{component:m.Z,children:(0,w.jsxs)(r.Z,{sx:{minWidth:700},"aria-label":"customized table",className:"dahbard_table_inner",children:[(0,w.jsx)(u.Z,{children:(0,w.jsxs)(j.Z,{children:[(0,w.jsx)(T,{align:"left",children:"S.No."}),(0,w.jsx)(T,{align:"left",children:"Plan Name"}),(0,w.jsx)(T,{align:"left",children:"Plan Type"}),(0,w.jsx)(T,{align:"left",children:"Radius"}),(0,w.jsx)(T,{align:"left",children:"Plan Price"}),(0,w.jsx)(T,{align:"left",children:"Action"})]})}),(0,w.jsx)(d.Z,{children:h.map(((l,a)=>(0,w.jsxs)(z,{children:[(0,w.jsx)(T,{component:"th",scope:"row",align:"",children:a+1}),(0,w.jsx)(T,{align:"",children:l.plan_name}),(0,w.jsx)(T,{align:"",children:l.plan_type}),(0,w.jsx)(T,{align:"",children:l.radius}),(0,w.jsx)(T,{align:"",children:l.amount}),(0,w.jsx)(T,{align:"",children:(0,w.jsx)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"",alignItems:"center",gap:"11px"},children:(0,w.jsx)(v.Z,{className:"edit_btn_global action-btn d-block",onClick:()=>(async l=>{e("".concat(k.ZP.basename,"/utils/editsubscribtion"),{state:{data:l}})})(l),children:(0,w.jsx)(C.Z,{title:"Edit",children:(0,w.jsx)(y.default,{})})})})})]},l._id)))})]})})})})})})]})})}}}]);