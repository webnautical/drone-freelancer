"use strict";(self.webpackChunkmantis_free_react_admin_template=self.webpackChunkmantis_free_react_admin_template||[]).push([[635],{440635:(e,a,t)=>{t.r(a),t.d(a,{default:()=>G});var n=t(809019),l=t(557829),i=t(585281),s=t(258467),r=t(561765),c=t(329814),o=t(624631),d=t(617592),h=t(366835),u=t(157861),m=t(770941),p=t(619438),x=t(751629),j=t(823477),g=t(924076),f=t(270501),v=t(747313),b=t(731095),_=t(42832),y=t(777970),Z=t(427710),k=t(559742),P=t(489332),w=t(183929),C=t(261113),S=t(301550),N=t(536287),A=t(861689),z=t(835705),E=t(999519),M=t(553321),L=(t(980281),t(502312)),T=t(966149),F=t(404117),D=t(896467),R=t(897762),q=t(233604),O=t(738085),B=t(644758),U=t(605178),I=t(355685),H=t(974268),V=t(118197),W=t(346417);const Y=(0,d.ZP)(m.Z)((e=>{let{theme:a}=e;return{["&.".concat(p.Z.head)]:{backgroundColor:"#1890ff",color:a.palette.common.white},["&.".concat(p.Z.body)]:{fontSize:14}}})),J=(0,d.ZP)(g.Z)((e=>{let{theme:a}=e;return{"&:nth-of-type(odd)":{backgroundColor:a.palette.action.hover},"&:last-child td, &:last-child th":{border:0}}})),G=()=>{const[e,a]=(0,v.useState)(!1),{type:t}=(0,s.UO)(),d=(0,s.s0)(),[m,p]=(0,v.useState)(1),[G,K]=(0,v.useState)([]),[Q,X]=(0,v.useState)(!0),[$,ee]=(0,v.useState)([]),[ae,te]=(0,v.useState)(""),[ne,le]=(0,v.useState)(null);(0,v.useEffect)((()=>{"approved"===t?(async()=>{X(!0);try{fetch("".concat(N.ZP.url,"/admin/getInactiveUsersRecored"),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)},body:JSON.stringify({role:"Pilot"})}).then((e=>e.json())).then((e=>{"User data get successfully"===e.message&&(ee(e.userRecord),K(e.userRecord),X(!1))}))}catch(e){console.log(e),X(!1)}})():(async()=>{X(!0);try{const n=await V.b.post("/admin/getPilotsByPlan",{type:t});var e,a;200==n.data.status?(ee(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.userRecord),K(null===n||void 0===n||null===(a=n.data)||void 0===a?void 0:a.userRecord),X(!1)):(ee([]),K([]),X(!1))}catch(n){console.log(n),X(!1)}})(),oe()}),[t]);const ie=e=>null===e||void 0===e?void 0:e.map((e=>({"First Name":e.first_name,"Last Name":e.last_name,Email:e.email,"Phone Number":e.phone,Location:e.location,Country:e.country,Role:e.role,Specilization:Array.isArray(e.specilization)?e.specilization.join(", "):e.specilization,company:e.first_name,"Short description":e.short_description,"website link":e.website_link,"Instagram link":e.instagram_link,"Facebook link":e.facebook_link,"Twiter link":e.twitter_link,tiktok_link:e.tiktok_link,Reviews:e.reviews,averageRating:e.averageRating,radius:e.radius,status:e.status,"Extra Area Category":Array.isArray(e.extra_area_category)?e.extra_area_category.join(", "):e.extra_area_category,specification:e.equipment.specification,Drone:Array.isArray(e.equipment.drone)?e.equipment.drone.join(", "):e.equipment.drone,"Camera specification":Array.isArray(e.equipment.camera_specification)?e.equipment.camera_specification.join(", "):e.equipment.camera_specification,payload:e.equipment.payload,"Subcription Plan Name":e.subcription_id,"Create Date":e.created_at}))),se=e=>{if("marketing_email"==e){const e=$.filter((e=>!0===e.receive_email));(0,E.S5)(ie(e),"MarketingApprovedPilotList","MarketingApprovedPilot")}else(0,E.S5)(ie($),"ApprovedPilotList","ApprovedPilot")},[re,ce]=(0,v.useState)([]),oe=async()=>{try{var e;const t=await V.b.post("/admin/getSubscriptionPlan");if(200==(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.status)){var a;const e=null===t||void 0===t||null===(a=t.data)||void 0===a?void 0:a.getsubscriptionpane.filter((e=>"silver"===e.plan_name.toLowerCase()||"gold"===e.plan_name.toLowerCase()||"free"===e.plan_name.toLowerCase()));ce(e)}else ce([])}catch(t){console.log(t),ce([])}},de=20*m,he=de-20,ue=null===$||void 0===$?void 0:$.slice(he,de),[me,pe]=(0,v.useState)(null);return(0,W.jsxs)(c.Z,{children:[(0,W.jsxs)("div",{className:"dahbard_table top_tab_bar",children:[(0,W.jsx)("div",{children:(0,W.jsxs)("h2",{children:[(0,E.pA)(t)," Pilots"]})}),(0,W.jsxs)("div",{className:"input-box",children:[(0,W.jsx)(b.Z,{className:"global_dashbtn text-end me-3",onClick:()=>se("marketing_email"),children:"Export Marketing Email"}),(0,W.jsx)(b.Z,{className:"global_dashbtn text-end me-3",onClick:()=>se("all"),children:"Export to Excel"}),(0,W.jsx)(o.Z,{id:"demo-helper-text-aligned-no-helper",label:"Search by Name",value:ae,onChange:e=>{const a=e.target.value;te(a);const t=G.filter((e=>e.first_name.toLowerCase().includes(a.toLowerCase())));ee(t)}})]})]}),(0,W.jsx)(n.ZP,{container:!0,spacing:3,children:Q?(0,W.jsx)("div",{className:"loader",style:{display:"flex",justifyContent:"center",alignItems:"center",width:"100%"},children:(0,W.jsx)(l.Z,{children:(0,W.jsx)(i.Z,{size:60})})}):(0,W.jsx)(W.Fragment,{children:(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(n.ZP,{item:!0,xs:12,lg:12,children:(0,W.jsx)(x.Z,{component:f.Z,className:"dahbard_table_inner",children:(null===G||void 0===G?void 0:G.length)>0?(0,W.jsxs)(h.Z,{className:"text-start",sx:{minWidth:700},"aria-label":"customized table",children:[(0,W.jsx)(j.Z,{children:(0,W.jsxs)(g.Z,{children:[(0,W.jsx)(Y,{align:"left",children:"S.No."}),(0,W.jsx)(Y,{align:"left",children:"Name"}),(0,W.jsx)(Y,{align:"left",children:"Email"}),"expired"===t?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Y,{align:"left",children:"Expired Plan"}),(0,W.jsx)(Y,{align:"left",children:"Plan Expire Date"})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Y,{align:"left",children:"Phone"}),(0,W.jsx)(Y,{align:"left",children:"Location"}),(0,W.jsx)(Y,{align:"left",children:"Status"}),(0,W.jsx)(Y,{align:"left",children:"Plan type"}),(0,W.jsx)(Y,{align:"left",children:"Joining Date"}),("silver-members"===t||"gold-members"===t)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Y,{align:"left",children:"Plan Purchase Date"}),(0,W.jsx)(Y,{align:"left",children:"Plan Expire Date"})]}),(0,W.jsx)(Y,{align:"left",children:"Send message"}),(0,W.jsx)(Y,{align:"left",children:"Marketing Email"}),(0,W.jsx)(Y,{align:"center",children:"Action"})]})]})}),(0,W.jsx)(u.Z,{children:ue.map(((e,n)=>{var l;return(0,W.jsxs)(J,{children:[(0,W.jsx)(Y,{component:"th",scope:"row",align:"",children:20*(m-1)+n+1}),"expired"===t?(0,W.jsx)(Y,{align:"",children:e.name}):(0,W.jsxs)(Y,{align:"",children:[e.first_name," ",e.last_name]}),(0,W.jsx)(Y,{align:"",children:e.email}),"expired"===t?(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Y,{align:"left",children:e.expired_plan}),(0,W.jsx)(Y,{align:"left",children:(0,O.S)(e.planExpiredate)})]}):(0,W.jsxs)(W.Fragment,{children:[(0,W.jsx)(Y,{align:"",children:e.phone}),(0,W.jsx)(Y,{align:"center",children:e.location}),(0,W.jsxs)(Y,{align:"",children:[" ",e.status," "]}),(0,W.jsx)(Y,{align:"",className:"text-uppercase",children:e.subscription_type}),(0,W.jsx)(Y,{align:"",children:(0,O.S)(e.created_at)}),("silver-members"===t||"gold-members"===t)&&(0,W.jsxs)(W.Fragment,{children:[(0,W.jsxs)(Y,{align:"",children:[" ",(0,O.S)(e.planStartdate)," "]}),(0,W.jsxs)(Y,{align:"",children:[" ",null===(l=e.planExpiredate)||void 0===l?void 0:l.split(" GMT")[0]," "]})]}),(0,W.jsx)(Y,{align:"",children:(0,W.jsx)(b.Z,{className:"view_btn action-btn d-block",onClick:()=>function(e){d("".concat(N.ZP.basename,"/sendmessage"),{state:e})}(e),children:(0,W.jsx)(A.Z,{title:"Send message",children:(0,W.jsx)(z.default,{})})})}),(0,W.jsx)(Y,{align:"center",children:(0,W.jsx)(B.Z,{disabled:!(null!==e&&void 0!==e&&e.receive_email),checked:null===e||void 0===e?void 0:e.receive_email})}),(0,W.jsx)(Y,{align:"left",children:(0,W.jsxs)("div",{style:{display:"flex",flexDirection:"row",justifyContent:"center",gap:"10px"},children:[(0,W.jsx)("div",{children:(0,W.jsx)(b.Z,{className:"edit_btn_global action-btn d-block",onClick:()=>{!function(e){try{fetch("".concat(N.ZP.url,"/admin/gettoken/").concat(e._id),{method:"POST",headers:{"Content-Type":"application/json"}}).then((e=>e.json())).then((e=>{"get data successfully"===e.message&&d("".concat(N.ZP.basename,"/utils/updateuser"),{state:{token:e.token,tab:0}})}))}catch(a){console.log(a)}}(e)},children:(0,W.jsx)(A.Z,{title:"Edit",children:(0,W.jsx)(Z.default,{})})})}),(0,W.jsx)(b.Z,{className:"btn-success action-btn d-block",onClick:()=>{(e=>{a(!0),le(e)})(e)},children:(0,W.jsx)(A.Z,{title:"Asign Plan",children:(0,W.jsx)(M.default,{})})}),(0,W.jsx)(b.Z,{className:"dlt_btn action-btn d-block",onClick:a=>{return t=a,n=e._id,t.preventDefault(),K((e=>e.filter((e=>e._id!==n)))),setTimeout((()=>{}),1e3),void fetch("".concat(N.ZP.url,"/admin/userdelete/").concat(n),{method:"DELETE",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{"user deleted successfully"===e.message&&window.location.reload()}));var t,n},children:(0,W.jsx)(A.Z,{title:"Hold",children:(0,W.jsx)(k.default,{})})}),(0,W.jsx)(b.Z,{className:"view_btn action-btn d-block",onClick:()=>function(e){d("".concat(N.ZP.basename,"/user-details"),{state:e})}(e),children:(0,W.jsx)(A.Z,{title:"View Details",children:(0,W.jsx)(P.default,{})})}),"Pilot"===e.role&&(0,W.jsx)(b.Z,{className:" action-btn d-block ".concat(e.preferred?"preferd_badge":"grey-color"),onClick:()=>function(e){try{fetch("".concat(N.ZP.url,"/admin/createpreffredlocation/").concat(e._id),{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(localStorage.jwt)}}).then((e=>e.json())).then((e=>{"create prefferd successfully"===e.message?((0,E.dr)("create prefferd successfully!"),window.location.reload()):"Un prefferd successfully"===e.message?((0,E.dr)("Un prefferd successfully"),window.location.reload()):(0,E.YE)("something want wrong")}))}catch(a){console.log(a)}}(e),children:(0,W.jsx)(A.Z,{title:e.preferred?"Preferred":"Not Preferred",children:(0,W.jsx)(L.default,{})})}),(0,W.jsx)(b.Z,{className:"view_btn action-btn d-block",onClick:()=>function(e){d("/profile-details/".concat(e._id))}(e),children:(0,W.jsx)(A.Z,{title:"Preview",children:(0,W.jsx)(r.default,{})})})]})})]})]},e._id)}))})]}):(0,W.jsx)("div",{className:"my-4 text-center d-block",children:(0,W.jsx)("h5",{children:"There are no data to display !!"})})})}),(0,W.jsx)(n.ZP,{container:!0,justifyContent:"center",className:"pageInation_box",children:(0,W.jsx)(n.ZP,{item:!0,xl:6,lg:8,md:10,sm:12,children:(0,W.jsx)(_.Z,{spacing:2,children:(0,W.jsx)(y.Z,{count:Math.ceil($.length/20),page:m,onChange:(e,a)=>p(a),variant:"outlined",shape:"rounded"})})})})]})})}),(0,W.jsxs)(T.Z,{open:e,"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",BackdropProps:{style:{backdropFilter:"blur(5px)"}},fullscreen:!0,children:[(0,W.jsx)(q.Z,{id:"alert-dialog-title",children:(0,W.jsx)("h5",{className:"text-center",children:"Assign plan"})}),(0,W.jsx)(D.Z,{children:(0,W.jsx)(R.Z,{id:"alert-dialog-description",children:(0,W.jsxs)("div",{className:"text-center",children:[(0,W.jsxs)(S.Z,{children:[(0,W.jsx)(U.Z,{id:"demo-row-radio-buttons-group-label",children:"Plan Type"}),(0,W.jsx)(I.Z,{row:!0,"aria-labelledby":"demo-row-radio-buttons-group-label",name:"row-radio-buttons-group",value:me,onChange:e=>pe(e.target.value),children:null===re||void 0===re?void 0:re.map(((e,a)=>(0,W.jsx)(w.Z,{value:e._id,control:(0,W.jsx)(H.Z,{}),label:(0,W.jsx)(C.Z,{className:"text-uppercase",style:{fontFamily:"Montserrat, sans-serif",fontWeight:"600",color:"#000"},children:e.plan_name})},a)))})]}),(0,W.jsxs)("h6",{className:"text-capitalize",children:["you are assigning plan to ",(0,W.jsx)("strong",{className:"text-uppercase",children:(null===ne||void 0===ne?void 0:ne.first_name)+" "+(null===ne||void 0===ne?void 0:ne.last_name)})]})]})})}),(0,W.jsxs)(F.Z,{children:[(0,W.jsx)("button",{className:"chat_btn",onClick:()=>{a(!1)},children:"Cancel"}),(0,W.jsx)("button",{className:"chat_btn",onClick:()=>(async()=>{try{const t={plan_id:me,user_id:null===ne||void 0===ne?void 0:ne._id},n=await V.b.post("/admin/createSubscriptionPlanbyAdmin",t);var e;200==n.data.status?((0,E.dr)(null===n||void 0===n||null===(e=n.data)||void 0===e?void 0:e.message),a(!1)):(0,E.YE)("Something went wrong !!")}catch(t){console.log(t),(0,E.YE)("Something went wrong !!")}})(),children:" Assign"})]})]})]})}},559742:(e,a,t)=>{var n=t(564836);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(t(945045)),i=t(346417),s=(0,l.default)((0,i.jsx)("path",{d:"m22 5.7-4.6-3.9-1.3 1.5 4.6 3.9L22 5.7zM7.9 3.4 6.6 1.9 2 5.7l1.3 1.5 4.6-3.8zM12.5 8H11v6l4.7 2.9.8-1.2-4-2.4V8zM12 4c-5 0-9 4-9 9s4 9 9 9 9-4 9-9-4-9-9-9zm0 16c-3.9 0-7-3.1-7-7s3.1-7 7-7 7 3.1 7 7-3.1 7-7 7z"}),"AccessAlarms");a.default=s},561765:(e,a,t)=>{var n=t(564836);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(t(945045)),i=t(346417),s=(0,l.default)([(0,i.jsx)("circle",{cx:"10",cy:"8",r:"4"},"0"),(0,i.jsx)("path",{d:"M10.35 14.01C7.62 13.91 2 15.27 2 18v2h9.54c-2.47-2.76-1.23-5.89-1.19-5.99zm9.08 4.01c.36-.59.57-1.28.57-2.02 0-2.21-1.79-4-4-4s-4 1.79-4 4 1.79 4 4 4c.74 0 1.43-.22 2.02-.57L20.59 22 22 20.59l-2.57-2.57zM16 18c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"},"1")],"PersonSearch");a.default=s},502312:(e,a,t)=>{var n=t(564836);Object.defineProperty(a,"__esModule",{value:!0}),a.default=void 0;var l=n(t(945045)),i=t(346417),s=(0,l.default)((0,i.jsx)("path",{d:"M9.68 13.69 12 11.93l2.31 1.76-.88-2.85L15.75 9h-2.84L12 6.19 11.09 9H8.25l2.31 1.84-.88 2.85zM20 10c0-4.42-3.58-8-8-8s-8 3.58-8 8c0 2.03.76 3.87 2 5.28V23l6-2 6 2v-7.72c1.24-1.41 2-3.25 2-5.28zm-8-6c3.31 0 6 2.69 6 6s-2.69 6-6 6-6-2.69-6-6 2.69-6 6-6z"}),"WorkspacePremium");a.default=s}}]);